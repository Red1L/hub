{"version":3,"sources":["modules/directives/toolbar/toolbar.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;;;IAOH,IAAI,MAAM,GAAG,YAAY,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC;IAU5D;QAEI,oBAAoB,UAAU,EAAU,SAAS,EAAU,YAAY,EAAU,qBAAqB;YAF1G,iBAyBC;YAvBuB,eAAU,GAAV,UAAU,CAAA;YAAU,cAAS,GAAT,SAAS,CAAA;YAAU,iBAAY,GAAZ,YAAY,CAAA;YAAU,0BAAqB,GAArB,qBAAqB,CAAA;YAGtG,aAAQ,GAAU,eAAe,CAAC;YAElC,SAAI,GAAuB,UAAC,KAAmB;gBAC3C,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;gBAEtB,KAAI,CAAC,YAAY,CAAC,EAAE,CAAC,4BAA4B,EAAE;oBAC/C,KAAK,CAAC,cAAc,GAAG,KAAI,CAAC,qBAAqB,CAAC,iBAAiB,EAAE,CAAC;gBAC1E,CAAC,CAAC,CAAC;gBAGH,KAAK,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,MAAM,IAAI,EAAE,CAAC;gBAEnD,KAAK,CAAC,aAAa,GAAG;oBAClB,KAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;gBACxC,CAAC,CAAC;gBAEF,KAAK,CAAC,iBAAiB,GAAG,UAAC,KAAa;oBACpC,MAAM,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,wBAAwB,GAAG,KAAK,CAAC,GAAG,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;gBAChH,CAAC,CAAA;YACL,CAAC,CAAC;QArBF,CAAC;;QAFM,kBAAO,GAAG,CAAC,YAAY,EAAE,WAAW,EAAE,cAAc,EAAE,uBAAuB,CAAC,CAAC;QAwB1F,iBAAC;IAAD,CAzBA,AAyBC,IAAA;IAED,OAAO;SACF,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC;SAC7B,SAAS,CAAC,YAAY,EAAE,gBAAgB,CAAC,aAAa,CAAa,UAAU,CAAC,CAAC,CAAC","file":"modules/directives/toolbar/toolbar.js","sourcesContent":["/*\n * Copyright (c) 2015-2016, The SeedStack authors <http://seedstack.org>\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nimport module =  require('../module');\nimport moduleConfig =  require('module');\nimport angular = require('{angular}/angular');\nimport toolbarTemplate = require('[text]!{hub}/modules/directives/toolbar/toolbar.html');\n\nvar config = moduleConfig && moduleConfig['config']() || {};\n\ninterface ISidebarScope extends ng.IScope {\n    userPrincipals:any;\n    config: {},\n    toggleSidebar(): void,\n    routeToSearchView (query: string): void,\n    query: string\n}\n\nclass HubToolbar implements ng.IDirective {\n    static $inject = ['$mdSidenav', '$location', 'EventService', 'AuthenticationService'];\n    constructor(private $mdSidenav, private $location, private eventService, private authenticationService) {\n    };\n\n    template:string = toolbarTemplate;\n\n    link:ng.IDirectiveLinkFn = (scope:ISidebarScope) => {\n        scope.config = config;\n\n        this.eventService.on('w20.security.authenticated', () => {\n            scope.userPrincipals = this.authenticationService.subjectPrincipals();\n        });\n\n\n        scope.query = this.$location.search().search || '';\n\n        scope.toggleSidebar = () => {\n            this.$mdSidenav('sidebar').toggle();\n        };\n\n        scope.routeToSearchView = (query: string) => {\n            return query ? this.$location.url('hub/components?search=' + query) : this.$location.url('/hub/components');\n        }\n    };\n}\n\nangular\n    .module(module.angularModules)\n    .directive('hubToolbar', DirectiveFactory.getFactoryFor<HubToolbar>(HubToolbar));\n"],"sourceRoot":"/source/"}